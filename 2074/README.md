先制 hello, world 解答の変遷
============================

[CodeIQ](https://codeiq.jp/)で出題された[先制 hello, world](http://nabetani.sakura.ne.jp/codeiq/prehewo/)に対する解答の変遷です。


Perl 6で様子見
--------------

まずはPerl 6で様子見です。
攻撃兼防御で先頭に' 'を入れています。出力文字列を大文字にすることで、攻撃を避けようとしています。これでもlcの'l'で攻撃でき、サンプルの脱力系PHPに勝てます。

```Perl6
 say lc <PREEMPTIVE "HELLO, WORLD">
```

15勝0分8負(24人中7位)、22勝0分11負(34人中8位)と、まずまずの成績です。


Brainf\*\*ck対策追加
--------------------

Brainf\*\*ck(以下BF)勢が増えそうなので、BF対策として'+'を入れてみます。

```Perl6
+ say lc <PREEMPTIVE "HELLO, WORLD">
```

31勝3分9負(44人中4位)、35勝4分12負(52人中10位)と、BF対策の効果が出ています。


Bashに乗り換え
--------------

ちゃんと攻撃しないと、勝ちを増やすのは難しそうなので、言語乗り換えを検討します。BFの反則的な強さは感じているものの、BF対策を入れるコードが増えるとつらそうなので、BFは避けます。

- BFに次ぐ攻撃の自由度を持つと思われる
    - エラー出力は無視されるので、でたらめなコマンドを入れてもOK
    - '"'はエスケープまたは閉じが必要など、多少の不自由はある
- いろいろな出力方法があり、的を絞られにくいと思われる

ということで、Bashを選択します。
出力文字列がそのままのコード、出力文字列を大文字にしただけのコードを攻撃します。また、trによるシーザー暗号で、攻撃をかわします。

(攻撃をかわすのが基本のコードでは、数文字まとめて倒す、という攻撃にせざるを得ません。)

```Bash
+ elEL|tr /D-Z \"a-w<<<"SUHHPSWLYH /KHOOR, ZRUOG/"
```

44勝1分9負(55人中3位)と、乗り換えの効果が出ています。


攻撃力アップ
------------

出力文字列をASCIIコードにしているコードを攻撃するために、'1'(d(100)〜z(122))と'6'(a(0x61)〜o(0x6F))を追加します。また、ループで出力しているBFは少ないのかもと思い、BF対策を'.'に変更します。

```Bash
. elEL16|tr /D-Z \"a-x<<<"SUHHPSWLYH /KHOOR, ZRUOG/"
```

47勝4分5負(57人中2位)、53勝2分5負(61人中1位)、53勝3分6負(63人中2位)、54勝1分7負(63人中2位)と、効果は出ていますが、1位になれる確率は低そうです。


防御力(祈り？)アップ その1
--------------------------

' 'をエスケープして、いろいろなコードに攻撃されていそうな'"'を減らしてみます。

```Bash
. e\lEL16|tr /D-Z \"a-x<<<SUHHPSWLYH\ /KHOOR,\ ZRUOG/
```

61勝4分5負(71人中2位)と、負けが減ったような気がしますが、効果は微妙です。


防御力(祈り？)アップ その2
--------------------------

PHPやRubyに攻撃されていそうな'<'をなくしてみます。

```Bash
. elEL16|echo SUHHPSWLYH /KHOOR, ZRUOG/|tr /D-Z \"a-x
```

63勝1分8負(73人中1位)と、1位になったものの、効果は微妙です。


防御力(祈り？)アップ その3
--------------------------

'O'と'R'が攻撃されている可能性を考慮し、シーザー暗号のシフト数を変更します。また、[Minority's hello, world](http://nabetani.sakura.ne.jp/codeiq/hwbattle2/)では記号があまり使われていなかったので、試しに記号を増やしてみます。

```Bash
. elEL16|echo QSFFNQUJWF /IFMMP, XPSME/|tr /@-^ \"_-~
```

65勝1分10負(77人中5位)と、逆効果のようです。


防御力(祈り？)アップ その4
--------------------------

記号は狙われているようなので、記号を減らしてみます。

('"'を'A'ではなく'B'か'Z'にして、'AC-Y'を1文字減らした方がよかったかもしれません。)

```Bash
. elEL16|echo QSFFNQUJWF AIFMMP, XPSMEA|tr AC-Y \"b-x
```

67勝1分8負(77人中1位)です。いろいろいじり過ぎて迷走気味ですが、結果オーライです(笑)。


防御力(祈り？)アップ その5
--------------------------

防御も兼ねて、BF対策を'-'に変更します。
上位のBFは、ループでの出力が少しはいそう、また、'+'と'-'であれば安直に攻撃されそうな'+'ではなく'-'を選択していそう、という読みです。トータルでのBFとの勝ち負けが同じなら、上位のBFから勝ちたいという思惑です。

```Bash
- elEL16|echo QSFFNQUJWF AIFMMP, XPSMEA|tr AC-Y \"b-x
```

68勝1分7負(77人中1位)です。防御が効いたのか、上位のBFを倒せたのか不明ですが、2位との差が開きます。


最終結果
--------

前回の結果がよいので、コード変更なしです。

最終形のコードの特徴は、次のとおりです。

- -を使っているBF

には、確実に勝てます。

- 出力文字列がそのままのコード
- 出力文字列を大文字に変換したコード
- 出力文字列をASCII文字コードに変換したコード

には、大体勝てます。

- 文字列のxorを使っているPerlやPHP
- 謎めいたPerlやAssembler
- 文字列と整数の減算を使っているOctave
- シーザー暗号を使っているコード

は、運任せです。

- -を使っていないBF

には、大体負けます。

完全に狙い打ちにしたようなコードでもない限り、確実に負けることはありません。

最終結果は、72勝1分8負で、82人中1位です。やったー！！

運任せとなるコードが少なかったことが幸いしたようですが、よくBFに勝てたなぁ、というのが素直な感想です。
